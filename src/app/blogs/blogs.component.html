<header>
  <div class="input-group">
    <input [(ngModel)]="keywordInput" (keydown)="keywordKeydown($event)" type="text" name="q" class="form-control"
           placeholder="Search...">
    <span class="input-group-btn">
      <button (click)="search()" type="submit" name="search" id="search-btn" class="btn btn-flat">
        <i class="fa fa-search"></i>
      </button>
    </span>
  </div>
</header>

<!-- Main content -->
<section class="content">
  <!-- row -->
  <div class="row">
    <div class="col-md-12">
      <!-- The time line -->
      <ul class="timeline">

        <!-- 添加新的 blogs -->
        <li>
          <i class="fa fa-envelope bg-blue"></i>
          <div class="timeline-item">
            <div class="timeline-body">
              <!-- mark down 实时编辑预览 -->
              <div class="nav-tabs-custom">
                <div class="tab-content no-padding">
                  <!-- Morris chart - Sales -->
                  <div class="chart tab-pane" [ngClass]="{active: navSelect != 1}" id="revenue-chart"
                       style="position: relative; height: 300px;">
                    <textarea [(ngModel)]="newBlog" class="item-create"></textarea>
                    <markdown [markdown]="newBlog" style="width: 50%;float: left;height: 100%;
                      overflow: scroll;padding: 8px"></markdown>
                  </div>
                </div>
              </div>
              <!-- /mark down 实时编辑预览 -->
            </div>

            <div class="timeline-footer">
              <a class="btn btn-primary btn-xs" (click)="create()">添加</a>
            </div>
          </div>
        </li>

        <li *ngFor="let blog of blogs;let i = index">

          <!-- 时间轴标签 -->
          <ul class="timeline" *ngIf="showTimelineLabel(i)">
            <li class="time-label"><span class="bg-red" [innerText]="timelineLabel(blog.created_at)"></span></li>
          </ul>

          <i class="fa fa-envelope bg-blue" [routerLink]="['/blogs',blog.id]"></i>
          <div class="timeline-item">
            <span class="time">Updated At <i class="fa fa-clock-o"></i> {{blog.updated_at}}</span>

            <div class="timeline-body">
              <markdown [markdown]="blog.blog" *ngIf="!blog.edit"></markdown>
              <textarea [(ngModel)]="blog.blog" *ngIf="blog.edit" class="item-blog"></textarea>
            </div>

            <div class="timeline-footer" *ngIf="!blog.edit">
              <a class="btn btn-primary btn-xs" (click)="editBlog(blog)">编辑</a>
              <a class="btn btn-danger btn-xs" (click)="deleteBlog(blog)">删除</a>
            </div>
            <div class="timeline-footer" *ngIf="blog.edit">
              <a class="btn btn-primary btn-xs" (click)="editSubmit(blog)">保存</a>
              <a class="btn btn-default btn-xs" (click)="editCancel(blog)">取消</a>
            </div>
          </div>
        </li>


        <!-- END timeline item -->
        <li infinite-scroll
            [infiniteScrollDistance]="2"
            (scrolled)="loadMore()">
          <i class="fa fa-clock-o bg-gray"></i>
          <div *ngIf="loading" class="timeline-item">
            <div class="timeline-body"> loading ...</div>
          </div>
        </li>
      </ul>
    </div>
    <!-- /.col -->
  </div>
  <!-- /.row -->

</section>
<!-- /.content -->

